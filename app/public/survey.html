<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Friend Finder - Survey</title>
    <script src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>
    <div class=container>
        <div class="jumbotron">
            <h1 class="display-4">Friend Finder!</h1>
            <p class="lead">Here is your survey, answer honestly!</p>
            <hr class="my-4">
            <p>Enter your name, choose a password and input a URL for your photo, then answer the questions.</p>
        </div>
        <div class="row name-pass-row">
            <div class=col-md-12>
                <div class="input-group input-group-lg">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Name</span>
                    </div>
                    <input type="text" class="form-control" id="name-input" aria-label="Name input">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Password</span>
                    </div>
                    <input type="text" class="form-control" id="password-input" aria-label="Password input">
                </div>
            </div>
        </div>
        <div class="row photo-row">
            <div class=col-md-12>
                <div class="input-group input-group-lg">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Photo URL</span>
                    </div>
                    <input type="text" class="form-control" id="photo-url-input" aria-label="Photo URL input">
                </div>
            </div>
        </div>
        <div class="row survey-row">
            <div class=col-md-3>
                <p>1) I love music.</p>
                <div class="btn-group btn-group-toggle" id=question-1 data-toggle="buttons">
                    <label class="btn btn-info">
                        <input type="radio" id=choice-1 value=1> 1
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-2 value=2> 2
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-3 value=3> 3
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-4 value=4> 4
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-5 value=5> 5
                    </label>
                </div>
            </div>
            <div class=col-md-3>
                <p>2) I love TV.</p>
                <div class="btn-group btn-group-toggle" id=question-2 data-toggle="buttons">
                    <label class="btn btn-info">
                        <input type="radio" id=choice-6 value=1> 1
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-7 value=2> 2
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-8 value=3> 3
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-9 value=4> 4
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-10 value=5> 5
                    </label>
                </div>
            </div>
            <div class=col-md-3>
                <p>3) I love movies.</p>
                <div class="btn-group btn-group-toggle" id=question-3 data-toggle="buttons">
                    <label class="btn btn-info">
                        <input type="radio" id=choice-11 value=1> 1
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-12 value=2> 2
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-13 value=3> 3
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-14 value=4> 4
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-15 value=5> 5
                    </label>
                </div>
            </div>
            <div class=col-md-3>
                <p>4) I love going out.</p>
                <div class="btn-group btn-group-toggle" id=question-4 data-toggle="buttons">
                    <label class="btn btn-info">
                        <input type="radio" id=choice-16 value=1> 1
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-17 value=2> 2
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-18 value=3> 3
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-19 value=4> 4
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-20 value=5> 5
                    </label>
                </div>
            </div>
            <div class=col-md-3>
                <p>5) I love staying in.</p>
                <div class="btn-group btn-group-toggle" id=question-5 data-toggle="buttons">
                    <label class="btn btn-info">
                        <input type="radio" id=choice-21 value=1> 1
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-22 value=2> 2
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-23 value=3> 3
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-24 value=4> 4
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-25 value=5> 5
                    </label>
                </div>
            </div>
            <div class=col-md-3>
                <p>6) I am religious.</p>
                <div class="btn-group btn-group-toggle" id=question-6 data-toggle="buttons">
                    <label class="btn btn-info">
                        <input type="radio" id=choice-26 value=1> 1
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-27 value=2> 2
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-28 value=3> 3
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-29 value=4> 4
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-30 value=5> 5
                    </label>
                </div>
            </div>
            <div class=col-md-3>
                <p>7) I love animals.</p>
                <div class="btn-group btn-group-toggle" id=question-7 data-toggle="buttons">
                    <label class="btn btn-info">
                        <input type="radio" id=choice-31 value=1> 1
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-32 value=2> 2
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-33 value=3> 3
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-34 value=4> 4
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-35 value=5> 5
                    </label>
                </div>
            </div>
            <div class=col-md-3>
                <p>8) I love video games</p>
                <div class="btn-group btn-group-toggle" id=question-8 data-toggle="buttons">
                    <label class="btn btn-info">
                        <input type="radio" id=choice-36 value=1> 1
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-37 value=2> 2
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-38 value=3> 3
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-39 value=4> 4
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-40 value=5> 5
                    </label>
                </div>
            </div>
            <div class=col-md-3>
                <p>9) I like politics.</p>
                <div class="btn-group btn-group-toggle" id=question-9 data-toggle="buttons">
                    <label class="btn btn-info">
                        <input type="radio" id=choice-41 value=1> 1
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-42 value=2> 2
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-43 value=3> 3
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-44 value=4> 4
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-45 value=5> 5
                    </label>
                </div>
            </div>
            <div class=col-md-3>
                <p>10) I like new foods.</p>
                <div class="btn-group btn-group-toggle" id=question-10 data-toggle="buttons">
                    <label class="btn btn-info">
                        <input type="radio" id=choice-46 value=1> 1
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-47 value=2> 2
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-48 value=3> 3
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-49 value=4> 4
                    </label>
                    <label class="btn btn-info">
                        <input type="radio" id=choice-50 value=5> 5
                    </label>
                </div>
            </div>
        </div>
        <div class="row submit-button-row">
            <div class=col-md-12>
                <button type="button" id=submit-button class="btn btn-primary btn-lg">Submit</button>
            </div>
        </div>
    </div>
    <div class="modal fade" id="match-modal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="match-name"></h5>
                </div>
                <div class="modal-body">
                    <img style="width: 25rem" id="match-photo">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-info btn-lg" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</body>

</html>

<script>
    class Friend {
        constructor(name, photo, password, scores) {
            this.name = name;
            this.photo = photo;
            this.password = password;
            this.scores = scores;
        };
    };

    $("#submit-button").on("click", function () {
        var newName = $("#name-input").val();
        $("#name-input").val("");
        var newPass = $("#password-input").val();
        $("#password-input").val("");
        var newPhoto = $("#photo-url-input").val();
        $("#photo-url-input").val("");
        var newScores = [];
        for (var i = 1; i < 51; i++) {
            if ($(`#choice-${i}`).prop("checked") === true) {
                newScores.push(parseInt($(`#choice-${i}`).val()));
            };
        };
        var newFriend = new Friend(newName, newPass, newPhoto, newScores);
        $.post("/api/friends", newFriend).then(data => {
            $.get("/api/friends").then(data => {
                $("#match-name").text(data.name);
                $("#match-photo").attr("src", data.photo);
                $("#match-modal").modal();
            });
        });
    });
</script>

<style>
    * {
        justify-content: center;
        text-align: center;
    }

    .submit-button-row {
        padding-top: 2rem;
        padding-bottom: 2rem;
    }

    .survey-row {
        border: 1px solid black;
        padding-top: 2rem;
        padding-right: 1rem;
    }

    .survey-row,
    .photo-row,
    .name-pass-row {
        padding-bottom: 2rem;
    }

    .btn-group {
        padding-bottom: 1rem;
    }

    .col-md-3 {
        width: auto;
    }

    p {
        font-size: .9rem;
    }
</style>